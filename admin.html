<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin — GrillShine</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Montserrat:wght@500;800&display=swap" rel="stylesheet" />

  <!-- Global Styles -->
  <link rel="stylesheet" href="assets/styles.css?v=8" />

  <style>
    .hidden { display: none !important; }
    .admin-card {
      max-width: 520px; margin: 40px auto 0;
      background: var(--card); border: 1px solid rgba(255,209,102,.22);
      border-radius: 14px; box-shadow: var(--shadow); padding: 22px;
    }
    .admin-card h2 { margin: 0 0 10px; color: var(--accent); }
    .admin-form .row { display: grid; gap: 6px; margin-bottom: 14px; }
    .admin-actions { display:flex; gap:10px; align-items:center; }
    .hint { color: var(--muted); font-size: 12.5px; margin-top: 10px; }
    .switch { display:flex; gap:8px; align-items:center; margin: 6px 0 2px; font-size: 14px; color: var(--muted); }
  </style>
</head>
<body>
  <!-- Sticky header -->
  <header class="site-header">
    <button id="menuToggle" class="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="siteNav">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <a class="brand" href="index.html#top" aria-label="GrillShine Home">
      <span class="brand-logo" aria-hidden="true"></span>
      <span class="brand-text">GrillShine</span>
    </a>
  </header>

  <!-- Drawer & backdrop -->
  <nav id="siteNav" class="nav-drawer" aria-hidden="true">
    <div class="drawer-head">
      <span class="drawer-title">Menu</span>
      <button id="closeMenu" class="close-btn" aria-label="Close menu">✕</button>
    </div>
    <ul>
      <li><a href="index.html#top"      class="nav-link">Home</a></li>
      <li><a href="index.html#quote"    class="nav-link">Get a Quote</a></li>
      <li><a href="index.html#services" class="nav-link">Services</a></li>
      <li><a href="about.html"          class="nav-link">About</a></li>
      <li><a href="before-after.html"   class="nav-link">Before &amp; After</a></li>
      <li><a href="faq.html"            class="nav-link">FAQ</a></li>
      <li><a href="index.html#contact"  class="nav-link">Contact</a></li>
    </ul>
    <div class="nav-cta">
      <a class="btn btn-outline" href="tel:+1-813-555-0199">Call: (813) 555-0199</a>
    </div>
  </nav>
  <div id="backdrop" class="backdrop" hidden></div>

  <!-- Page banner -->
  <section class="page-hero page-hero--sm">
    <div class="inner">
      <h1>Admin</h1>
      <p class="sub">Temporary front-end gate. We’ll swap to real auth later.</p>
    </div>
  </section>

  <main class="section" role="main">
    <!-- Sign-in card -->
    <section id="admin-gate" class="admin-card">
      <h2>Admin Sign In</h2>
      <p class="hint">For now this is a simple front-end check.</p>
      <form id="admin-form" class="admin-form" novalidate>
        <div class="row">
          <label for="admin-user"><strong>Username (optional)</strong></label>
          <input id="admin-user" name="user" type="text" placeholder="admin" value="admin" autocomplete="username" />
        </div>

        <div class="row">
          <label for="admin-pass"><strong>Password</strong></label>
          <input id="admin-pass" name="pass" type="password" placeholder="••••••••" autocomplete="current-password" />
          <label class="switch">
            <input type="checkbox" id="showpass" /> Show password
          </label>
        </div>

        <div id="admin-msg" class="error" role="alert" aria-live="polite"></div>

        <div class="admin-actions">
          <button class="btn btn-primary" id="admin-submit" type="submit">Sign In</button>
          <a class="btn btn-ghost" href="index.html#top">Back to site</a>
        </div>

        <p class="hint" style="margin-top:12px">
          Hint: username <strong>admin</strong> &nbsp; password <strong>password123</strong><br/>
          …or type the passphrase in the password box: <strong>admin password123</strong>
        </p>
      </form>
    </section>

    <!-- Fallback panel (you’ll rarely see this—auto-redirect goes to quotes) -->
    <section id="admin-panel" class="admin-card hidden" aria-hidden="true">
      <h2>Welcome, Admin</h2>
      <p>You’re signed in (client-side session).</p>
      <div class="admin-actions" style="margin-top:10px">
        <a class="btn btn-primary" href="admin-quotes.html">Go to Quotes</a>
        <button class="btn btn-outline" id="admin-signout" type="button">Sign out</button>
      </div>
      <p class="hint">Front-end only. In production we’ll move to server sessions/tokens.</p>
    </section>
  </main>

  <footer class="site-footer">
    <small>© <span id="year"></span> GrillShine. All rights reserved.</small>
  </footer>

  <!-- Shared drawer/smooth-scroll script -->
  <script src="assets/script.js?v=14"></script>

  <!-- Inline gate logic -->
  <script>
    // Year
    (document.getElementById('year')||{}).textContent = new Date().getFullYear();

    // Elements
    const form     = document.getElementById('admin-form');
    const userEl   = document.getElementById('admin-user');
    const passEl   = document.getElementById('admin-pass');
    const msgEl    = document.getElementById('admin-msg');
    const showEl   = document.getElementById('showpass');
    const gate     = document.getElementById('admin-gate');
    const panel    = document.getElementById('admin-panel');
    const signOut  = document.getElementById('admin-signout');

    // Config
    const USERNAME = 'admin';
    const PASSWORD = 'password123';
    const PASSPHRASE = 'admin password123';
    const QUOTES_URL = 'admin-quotes.html';

    // Keys used across pages
    const LOCAL_KEYS = ['gs_admin_signed_in','isAdminSignedIn'];
    const SESSION_KEY = 'gs_admin_logged_in';

    const isAuthed = () => {
      try {
        const local = LOCAL_KEYS.some(k => localStorage.getItem(k) === '1');
        const sess  = sessionStorage.getItem(SESSION_KEY) === '1';
        return local || sess;
      } catch (_) { return false; }
    };
    const setAuthed = (v) => {
      try {
        if (v) {
          LOCAL_KEYS.forEach(k => localStorage.setItem(k,'1'));
          sessionStorage.setItem(SESSION_KEY,'1');
        } else {
          LOCAL_KEYS.forEach(k => localStorage.removeItem(k));
          sessionStorage.removeItem(SESSION_KEY);
        }
      } catch (_) {}
    };

    // If already signed in, go straight to quotes
    if (isAuthed()) {
      window.location.replace(QUOTES_URL);
    }

    // Toggle password visibility
    showEl?.addEventListener('change', () => {
      passEl.type = showEl.checked ? 'text' : 'password';
      passEl.focus();
    });

    function showError(text){ if (msgEl) msgEl.textContent = text; }
    function showPanel(){
      gate.classList.add('hidden');
      panel.classList.remove('hidden');
      panel.setAttribute('aria-hidden','false');
    }
    function showGate(){
      panel.classList.add('hidden');
      panel.setAttribute('aria-hidden','true');
      gate.classList.remove('hidden');
      userEl.focus();
    }

    // Handle submit
    form?.addEventListener('submit', (e) => {
      e.preventDefault();
      const u = (userEl.value || '').trim().toLowerCase();
      const p = (passEl.value || '').trim();

      const okUser = !u || u === USERNAME; // username optional; if provided must be "admin"
      const okPass = p === PASSWORD || p.toLowerCase() === PASSPHRASE;

      if (okUser && okPass) {
        setAuthed(true);
        showError('');
        // Hard redirect to the quotes inbox
        window.location.assign(QUOTES_URL);
      } else {
        setAuthed(false);
        showError('That username or password didn’t look right. Try again.');
        passEl.focus();
      }
    });

    // Fallback signout (main signout is on the quotes page)
    signOut?.addEventListener('click', () => {
      setAuthed(false);
      passEl.value = '';
      showError('');
      showGate();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
</body>
</html>
